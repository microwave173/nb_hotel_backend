import{r as S,a1 as R,D as A,c as r,a as u,w as l,b as m,o as a,d as n,i as c,t as o,F as i,e as F,f as I,L as f,y as V,P as E}from"./index-BE7gfLc4.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"air-conditioner-record"},P={class:"card-header"},U={class:"header-left"},j={class:"total-fee"},q={class:"fee-amount"},G={class:"record-content"},H={class:"record-details"},M={key:0,class:"record-fee"},$={key:0,class:"no-records"},z={__name:"UserAirConditionerRecord",setup(J){const h=V(),p=E(),d=S([{timestamp:"2023-12-20 10:00:00",action:"power",details:{status:!0},fee:0},{timestamp:"2023-12-20 10:05:00",action:"temperature",details:{from:26,to:24},fee:0},{timestamp:"2023-12-20 10:10:00",action:"fanSpeed",details:{from:1,to:2},fee:2},{timestamp:"2023-12-20 11:00:00",action:"mode",details:{from:"cool",to:"heat"},fee:0},{timestamp:"2023-12-20 12:00:00",action:"power",details:{status:!1},fee:5}]),y=async s=>{try{const e=await fetch(s,{method:"GET",credentials:"include"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Toggle failed:",e.message),e}},w=async()=>{const s=p.params.roomNumber||"1001",e=await y("/api/get_room_logs?roomId="+s.slice(-1));console.log(e)};R(()=>{w()});const g=A(()=>d.value.reduce((s,e)=>s+(e.fee||0),0)),k=s=>{switch(s){case"power":return"primary";case"temperature":return"success";case"mode":return"warning";case"fanSpeed":return"info";default:return""}},v=s=>{switch(s){case"power":return"电源操作";case"temperature":return"温度调节";case"mode":return"模式切换";case"fanSpeed":return"风速调节";default:return"未知操作"}},_=s=>{switch(s){case 0:return"低速";case 1:return"中速";case 2:return"高速";default:return"关闭"}},C=()=>{const s=p.params.roomNumber||"1001";h.push({name:"RoomControl",params:{roomNumber:s}})};return(s,e)=>{const T=m("el-button"),b=m("el-timeline-item"),x=m("el-timeline"),N=m("el-card");return a(),r("div",D,[u(N,{class:"record-card"},{header:l(()=>[n("div",P,[n("div",U,[u(T,{type:"primary",icon:"ArrowLeft",circle:"",onClick:C,class:"back-button"}),e[0]||(e[0]=n("span",{class:"title"},"空调使用记录",-1))]),n("div",j,[e[1]||(e[1]=c(" 总费用：")),n("span",q,"¥"+o(g.value),1)])])]),default:l(()=>[u(x,null,{default:l(()=>[(a(!0),r(i,null,F(d.value,(t,B)=>(a(),I(b,{key:B,timestamp:t.timestamp,type:k(t.action)},{default:l(()=>[n("div",G,[n("h4",null,o(v(t.action)),1),n("div",H,[t.action==="temperature"?(a(),r(i,{key:0},[c(" 温度调节："+o(t.details.from)+"°C → "+o(t.details.to)+"°C ",1)],64)):t.action==="mode"?(a(),r(i,{key:1},[c(" 模式切换："+o(t.details.from==="cool"?"制冷":"制热")+" → "+o(t.details.to==="cool"?"制冷":"制热"),1)],64)):t.action==="fanSpeed"?(a(),r(i,{key:2},[c(" 风速调节："+o(_(t.details.from))+" → "+o(_(t.details.to)),1)],64)):(a(),r(i,{key:3},[c(o(t.details.status?"开启":"关闭"),1)],64))]),t.fee?(a(),r("div",M," 费用：¥"+o(t.fee),1)):f("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1}),d.value.length===0?(a(),r("div",$," 暂无使用记录 ")):f("",!0)]),_:1})])}}},Q=L(z,[["__scopeId","data-v-5e630180"]]);export{Q as default};
