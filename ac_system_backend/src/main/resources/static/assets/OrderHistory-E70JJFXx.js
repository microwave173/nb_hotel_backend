import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{W as le,r as v,c as m,d as a,a as e,w as o,F as k,e as B,b as i,o as u,i as s,f as D,t as c,L as y,J as b,X as z}from"./index-BE7gfLc4.js";const oe={class:"order-history"},ne={class:"filter-section"},ae={class:"order-list"},se={class:"order-header"},ce={class:"order-info"},ie={class:"order-number"},de={class:"order-date"},ue={class:"order-content"},re={class:"room-info"},me=["src"],_e={class:"room-details"},pe={class:"date-range"},ve={class:"guest-count"},fe={class:"price-info"},ge={class:"total-price"},ke={class:"price"},ye={class:"order-footer"},be={class:"order-actions"},he={class:"pagination"},Ce={key:0,class:"order-detail"},Ve={key:0,class:"comment-section"},xe={key:0,class:"comment-content"},De={key:0,class:"comment-images"},Ne={key:1,class:"no-comment"},Re={__name:"OrderHistory",setup(Te){const p=le({status:"",dateRange:[]}),h=v(1),C=v(10),O=v(100),U=v([{id:1,orderNumber:"ORDER202401010001",status:"pending",createTime:"2024-01-01 10:00:00",roomName:"标准单人间",roomImage:"https://example.com/room1.jpg",checkInDate:"2024-01-05",checkOutDate:"2024-01-07",guestCount:1,totalPrice:398,phone:"13800138000",specialRequests:"希望安排安静的房间",paymentMethod:"微信支付"}]),V=v(!1),n=v(null),N=d=>({pending:"warning",confirmed:"primary",completed:"success",cancelled:"info"})[d]||"info",R=d=>({pending:"待支付",confirmed:"已确认",completed:"已完成",cancelled:"已取消"})[d]||d,S=()=>{b.success("筛选成功")},I=()=>{p.status="",p.dateRange=[]},M=d=>{b.success("跳转支付...")},P=d=>{z.confirm("确定要取消该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b.success("订单已取消")}).catch(()=>{})},$=d=>{z.confirm("确定要申请退款吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b.success("退款申请已提交")}).catch(()=>{})},F=d=>{},E=d=>{},Y=d=>{n.value=d,V.value=!0},j=d=>{C.value=d},q=d=>{h.value=d};return(d,l)=>{const f=i("el-option"),H=i("el-select"),x=i("el-form-item"),L=i("el-date-picker"),_=i("el-button"),J=i("el-form"),T=i("el-tag"),W=i("Calendar"),w=i("el-icon"),X=i("User"),A=i("el-card"),G=i("el-pagination"),r=i("el-descriptions-item"),K=i("el-descriptions"),Q=i("el-rate"),Z=i("el-image"),ee=i("el-dialog");return u(),m("div",oe,[a("div",ne,[e(J,{inline:!0,model:p},{default:o(()=>[e(x,{label:"订单状态"},{default:o(()=>[e(H,{modelValue:p.status,"onUpdate:modelValue":l[0]||(l[0]=t=>p.status=t),placeholder:"全部状态"},{default:o(()=>[e(f,{label:"全部",value:""}),e(f,{label:"待支付",value:"pending"}),e(f,{label:"已确认",value:"confirmed"}),e(f,{label:"已完成",value:"completed"}),e(f,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),e(x,{label:"时间范围"},{default:o(()=>[e(L,{modelValue:p.dateRange,"onUpdate:modelValue":l[1]||(l[1]=t=>p.dateRange=t),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(x,null,{default:o(()=>[e(_,{type:"primary",onClick:S},{default:o(()=>l[6]||(l[6]=[s("查询")])),_:1}),e(_,{onClick:I},{default:o(()=>l[7]||(l[7]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),a("div",ae,[(u(!0),m(k,null,B(U.value,t=>(u(),D(A,{key:t.id,class:"order-card"},{default:o(()=>[a("div",se,[a("div",ce,[a("span",ie,"订单号："+c(t.orderNumber),1),e(T,{type:N(t.status)},{default:o(()=>[s(c(R(t.status)),1)]),_:2},1032,["type"])]),a("span",de,"下单时间："+c(t.createTime),1)]),a("div",ue,[a("div",re,[a("img",{src:t.roomImage,class:"room-image"},null,8,me),a("div",_e,[a("h3",null,c(t.roomName),1),a("p",pe,[e(w,null,{default:o(()=>[e(W)]),_:1}),s(" "+c(t.checkInDate)+" 至 "+c(t.checkOutDate),1)]),a("p",ve,[e(w,null,{default:o(()=>[e(X)]),_:1}),s(" 入住人数："+c(t.guestCount)+"人 ",1)])])]),a("div",fe,[a("div",ge,[l[8]||(l[8]=a("span",{class:"label"},"总价",-1)),a("span",ke,"¥"+c(t.totalPrice),1)])])]),a("div",ye,[a("div",be,[t.status==="pending"?(u(),m(k,{key:0},[e(_,{type:"primary",onClick:g=>M(t)},{default:o(()=>l[9]||(l[9]=[s("立即支付")])),_:2},1032,["onClick"]),e(_,{type:"danger",onClick:g=>P(t)},{default:o(()=>l[10]||(l[10]=[s("取消订单")])),_:2},1032,["onClick"])],64)):t.status==="confirmed"?(u(),D(_,{key:1,onClick:g=>$(t)},{default:o(()=>l[11]||(l[11]=[s("申请退款")])),_:2},1032,["onClick"])):t.status==="completed"?(u(),m(k,{key:2},[e(_,{type:"primary",onClick:g=>F(t)},{default:o(()=>l[12]||(l[12]=[s("评价")])),_:2},1032,["onClick"]),e(_,{onClick:g=>E(t)},{default:o(()=>l[13]||(l[13]=[s("再次预订")])),_:2},1032,["onClick"])],64)):y("",!0),e(_,{onClick:g=>Y(t)},{default:o(()=>l[14]||(l[14]=[s("查看详情")])),_:2},1032,["onClick"])])])]),_:2},1024))),128))]),a("div",he,[e(G,{"current-page":h.value,"onUpdate:currentPage":l[2]||(l[2]=t=>h.value=t),"page-size":C.value,"onUpdate:pageSize":l[3]||(l[3]=t=>C.value=t),total:O.value,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:j,onCurrentChange:q},null,8,["current-page","page-size","total"])]),e(ee,{modelValue:V.value,"onUpdate:modelValue":l[5]||(l[5]=t=>V.value=t),title:"订单详情",width:"700px"},{default:o(()=>[n.value?(u(),m("div",Ce,[e(K,{column:2,border:""},{default:o(()=>[e(r,{label:"订单号"},{default:o(()=>[s(c(n.value.orderNumber),1)]),_:1}),e(r,{label:"下单时间"},{default:o(()=>[s(c(n.value.createTime),1)]),_:1}),e(r,{label:"房间类型"},{default:o(()=>[s(c(n.value.roomName),1)]),_:1}),e(r,{label:"订单状态"},{default:o(()=>[e(T,{type:N(n.value.status)},{default:o(()=>[s(c(R(n.value.status)),1)]),_:1},8,["type"])]),_:1}),e(r,{label:"入住日期"},{default:o(()=>[s(c(n.value.checkInDate),1)]),_:1}),e(r,{label:"退房日期"},{default:o(()=>[s(c(n.value.checkOutDate),1)]),_:1}),e(r,{label:"入住人数"},{default:o(()=>[s(c(n.value.guestCount)+"人",1)]),_:1}),e(r,{label:"联系电话"},{default:o(()=>[s(c(n.value.phone),1)]),_:1}),e(r,{label:"特殊要求",span:2},{default:o(()=>[s(c(n.value.specialRequests||"无"),1)]),_:1}),e(r,{label:"房费总计"},{default:o(()=>[s("¥"+c(n.value.totalPrice),1)]),_:1}),e(r,{label:"支付方式"},{default:o(()=>[s(c(n.value.paymentMethod||"-"),1)]),_:1})]),_:1}),n.value.status==="completed"?(u(),m("div",Ve,[l[15]||(l[15]=a("h3",null,"我的评价",-1)),n.value.comment?(u(),m("div",xe,[e(Q,{modelValue:n.value.comment.rating,"onUpdate:modelValue":l[4]||(l[4]=t=>n.value.comment.rating=t),disabled:""},null,8,["modelValue"]),a("p",null,c(n.value.comment.content),1),n.value.comment.images?(u(),m("div",De,[(u(!0),m(k,null,B(n.value.comment.images,t=>(u(),D(Z,{key:t,src:t,"preview-src-list":n.value.comment.images,fit:"cover",class:"comment-image"},null,8,["src","preview-src-list"]))),128))])):y("",!0)])):(u(),m("div",Ne," 暂无评价 "))])):y("",!0)])):y("",!0)]),_:1},8,["modelValue"])])}}},ze=te(Re,[["__scopeId","data-v-907ca456"]]);export{ze as default};
